!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("react"));else if("function"==typeof define&&define.amd)define(["react"],t);else{var s,r="object"==typeof exports?t(require("react")):t(e.react);for(s in r)("object"==typeof exports?exports:e)[s]=r[s]}}(self,function(t){return(()=>{var s={184:(e,t)=>{var s;
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/
!function(){"use strict";var a={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var s=arguments[t];if(s){var r=typeof s;if("string"==r||"number"==r)e.push(s);else if(Array.isArray(s)&&s.length){var o=i.apply(null,s);o&&e.push(o)}else if("object"==r)for(var n in s)a.call(s,n)&&s[n]&&e.push(n)}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(s=function(){return i}.apply(t,[]))||(e.exports=s)}()},297:e=>{"use strict";e.exports=t}},r={};function re(e){var t=r[e];if(void 0!==t)return t.exports;t=r[e]={exports:{}};return s[e](t,t.exports,re),t.exports}re.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return re.d(t,{a:t}),t},re.d=(e,t)=>{for(var s in t)re.o(t,s)&&!re.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},re.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),re.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var oe={};return(()=>{"use strict";re.r(oe),re.d(oe,{Avatar:()=>i,BubbleGroup:()=>j,ChatBubble:()=>S,ChatFeed:()=>Z,ChatInput:()=>se,ChatScrollArea:()=>f,DateRow:()=>H,IsTyping:()=>p,LastSeenAvatar:()=>C,LoadingMessages:()=>D,SystemChatBubble:()=>_});var T=re(297);const L={chatBubbleWrapper:{position:"relative",marginBottom:2,display:"flex"},chatBubble:{position:"relative",backgroundColor:"#0084FF",borderRadius:7,marginRight:"auto",marginLeft:"auto",maxWidth:"80%",paddingTop:8,paddingBottom:14,paddingLeft:14,paddingRight:14},userChatBubbleOrientationNormal:{marginRight:0},recipientChatBubbleOrientationNormal:{marginLeft:0},recipientChatBubble:{backgroundColor:"#ccc"},text:{color:"#FFFFFF",fontSize:16,fontWeight:300,margin:0,marginRight:30,whiteSpace:"pre"},userFirstChatBubbleInGroup:{borderTopRightRadius:0},recipientFirstChatBubbleInGroup:{borderTopLeftRadius:0},userLastChatBubbleInGroup:{borderTopRightRadius:0},recipientLastChatBubbleInGroup:{borderTopLeftRadius:0},userCenterChatBubbleInGroup:{borderTopRightRadius:0,borderBottomRightRadius:0},recipientCenterChatBubbleInGroup:{borderBottomLeftRadius:0,borderTopLeftRadius:0},createdOn:{position:"absolute",right:14,bottom:2,fontSize:9,color:"rgba(255, 255, 255, 0.55)"},isSend:{position:"absolute",right:2,bottom:2,fontSize:9},lastSeenByContainer:{position:"absolute",right:-30,top:0,width:20,height:"100%"},loadingSpinnerColor:"rgba(255, 255, 255, 0.55)",isSendIconColor:"#cddc39"};var r,t,e=re(184),R=re.n(e),e=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function s(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}),I=function(){return(I=Object.assign||function(e){for(var t,s=1,r=arguments.length;s<r;s++)for(var o in t=arguments[s])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function s(e){e=t.call(this,e)||this;return e.state={mouseOverLastSeenContainer:!1},e}const S=(t=T.PureComponent,e(s,t),s.prototype.render=function(){var s=this;if(!this.props.message)return null;var e=this.props,r=e.lastSeenAvatarStyles,t=e.yourAuthorId,o=e.lastSeenAvatarClasses,n=this.props,a=n.styles,i=(i=n.classes)||{},l=(a=a||{}).userChatBubble,c=a.chatBubble,p=a.text,u=a.userText,h=a.recipientText,b=a.recipientChatBubble,d=a.firstChatBubbleInGroup,g=a.userFirstChatBubbleInGroup,f=a.recipientFirstChatBubbleInGroup,m=a.centerChatBubbleInGroup,y=a.userCenterChatBubbleInGroup,v=a.recipientCenterChatBubbleInGroup,C=a.lastChatBubbleInGroup,S=a.userLastChatBubbleInGroup,w=a.recipientLastChatBubbleInGroup,O=a.userChatBubbleOrientationNormal,_=a.recipientChatBubbleOrientationNormal,B=a.chatBubbleWrapper,A=a.createdOn,M=a.userCreatedOn,x=a.recipientCreatedOn,e=a.isSendIconColor,n=a.loadingSpinnerColor,a=a.lastSeenByContainer,t=this.props.message.authorId===t,w=I(I(I(I(I(I(I(I(I(I(I(I(I(I(I(I(I(I(I({},L.chatBubble),c),this.props.style),t?L.userChatBubble:L.recipientChatBubble),t?l:b),t?L.userChatBubbleOrientationNormal:L.recipientChatBubbleOrientationNormal),t?O:_),this.props.isFirstInGroup&&L.firstChatBubbleInGroup),this.props.isFirstInGroup&&(t?L.userFirstChatBubbleInGroup:L.recipientFirstChatBubbleInGroup)),this.props.isCenterInGroup&&L.centerChatBubbleInGroup),this.props.isCenterInGroup&&(t?L.userCenterChatBubbleInGroup:L.recipientCenterChatBubbleInGroup)),this.props.isLastInGroup&&L.lastChatBubbleInGroup),this.props.isLastInGroup&&(t?L.userLastChatBubbleInGroup:L.recipientLastChatBubbleInGroup)),this.props.isFirstInGroup&&d),this.props.isFirstInGroup&&(t?g:f)),this.props.isCenterInGroup&&m),this.props.isCenterInGroup&&(t?y:v)),this.props.isLastInGroup&&C),this.props.isLastInGroup&&(t?S:w)),u=I(I(I({},L.text),p),t?u:h),h=R()("react-bell-chat__chat-bubble__text",i.text,t?i.userText:i.recipientText);return T.createElement("div",{style:I(I({},L.chatBubbleWrapper),B),className:R()("react-bell-chat__chat-bubble__wrapper",this.props.className,i.chatBubbleWrapper)},T.createElement("div",{style:I({},w),className:R()("react-bell-chat__chat-bubble",this.props.className,i.chatBubble,((w={})[i.recipientChatBubble]=!t,w[i.userChatBubble]=t,w))},this.props.customMessageRender?this.props.customMessageRender({message:this.props.message,style:u,className:h}):T.createElement("span",{style:u,className:h},this.props.message.message),this.props.message.createdOn&&T.createElement("span",{style:I(I(I(I({},L.createdOn),A),t?L.userCreatedOn:L.recipientCreatedOn),t?M:x),className:R()("react-bell-chat__chat-bubble__created-on",i.createdOn,t?i.userCreatedOn:i.recipientCreatedOn),title:this.props.message.createdOn.toLocaleString()},this.props.message.createdOn.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!0})),void 0!==this.props.message.isSend&&t&&T.createElement("span",{style:I({},L.isSend),className:R()("react-bell-chat__chat-bubble__is-send",i.isSend),title:this.props.message.isSend?"Send":"Sending"},this.props.message.isSend?T.createElement("svg",{width:"10px",height:"10px",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 10 10",preserveAspectRatio:"xMidYMid",style:{background:"none"}},T.createElement("path",I({fill:e||L.isSendIconColor},{},{d:"M9,1.7L8.6,1.4C8.5,1.3,8.3,1.3,8.2,1.4L3.9,7C3.8,7.1,3.6,7.1,3.5,7c0,0,0,0,0,0L1.7,5.3c-0.1-0.1-0.3-0.1-0.4,0L1,5.6 C0.9,5.7,0.9,5.9,1,6l2.6,2.6c0.1,0.1,0.3,0.1,0.4,0L9,2.1C9.1,2,9.1,1.8,9,1.7z"}))):T.createElement("svg",{width:"10px",height:"10px",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",style:{background:"none"}},T.createElement("path",{stroke:"none",d:"M10 50A40 40 0 0 0 90 50A40 45 0 0 1 10 50",fill:n||L.loadingSpinnerColor,transform:"rotate(78 50 52.5)"},T.createElement("animateTransform",{attributeName:"transform",type:"rotate",calcMode:"linear",values:"0 50 52.5;360 50 52.5",keyTimes:"0;1",dur:"1s",begin:"0s",repeatCount:"indefinite"}))))),this.props.showRecipientLastSeenMessage&&this.props.lastSeenByAuthors&&0<this.props.lastSeenByAuthors.length&&this.props.customLastSeenAvatar&&T.createElement("div",{style:I(I({},L.lastSeenByContainer),a),className:R()("react-bell-chat__chat-bubble__last-seen-by__container",i.lastSeenByContainer),onMouseEnter:function(){return s.setState({mouseOverLastSeenContainer:!0})},onMouseLeave:function(){return s.setState({mouseOverLastSeenContainer:!1})},title:"Last seen by "+this.props.lastSeenByAuthors.map(function(e){return e.name}).join(", ").replace(/,(?!.*,)/gim," and")},this.props.lastSeenByAuthors.map(function(e,t){return T.createElement(s.props.customLastSeenAvatar,{key:t,author:e,styles:I(I({},r),{container:I(I({},r?r.container:{}),0<t&&!s.state.mouseOverLastSeenContainer?{marginTop:-12}:{marginTop:-4})}),classes:o})})))},s);var o=function(){return(o=Object.assign||function(e){for(var t,s=1,r=arguments.length;s<r;s++)for(var o in t=arguments[s])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},n={position:"absolute",left:-50,top:0,width:40,height:40,lineHeight:"40px",fontWeight:400,color:"white",backgroundColor:"rgb(153, 153, 153)",borderRadius:20,textAlign:"center",borderTopRightRadius:5},a={pointerEvents:"none"};const i=T.memo(function(e){var t=e.author,s=e.classes,r=e.className;return t&&T.createElement("div",{style:o(o(o({},n),e.styles&&e.styles.container),e.style),title:t.name,className:R()("react-bell-chat__avatar",s&&s.container,r)},T.createElement("span",{style:o(o({},a),e.styles&&e.styles.text),className:R()("react-bell-chat__avatar__text",s&&s.text)},t.avatarName||t.name.split(" ").map(function(e){return e[0]}).join("").toUpperCase().substr(0,3)))});var l=function(){return(l=Object.assign||function(e){for(var t,s=1,r=arguments.length;s<r;s++)for(var o in t=arguments[s])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},c={position:"absolute",bottom:2,left:0,right:0,color:"rgb(204, 204, 204)",textAlign:"center"};const p=T.memo(function(e){var t=e.styles,s=(s=e.classes)||{},t=(t=t||{}).container;return e.typingAuthors&&0<e.typingAuthors.length&&T.createElement("div",{className:R()("react-bell-chat__is-typing__container",e.className,s.container),style:l(l(l({},c),t),e.style)},e.typingAuthors.map(function(e){return e.name}).join(", ").replace(/,(?!.*,)/gim," and")+(1===e.typingAuthors.length?" is ":" are ")+"typing")});var u,h,e=(u=function(e,t){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function s(){this.constructor=e}u(e,t),e.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}),b=function(){return(b=Object.assign||function(e){for(var t,s=1,r=arguments.length;s<r;s++)for(var o in t=arguments[s])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},d={overflow:"auto",padding:"0 10px",display:"flex",flexDirection:"column",height:"100%"};function g(e){e=h.call(this,e)||this;return e.containerRef=e.containerRef.bind(e),e.onScroll=e.onScroll.bind(e),e}const f=(h=T.PureComponent,e(g,h),g.prototype.render=function(){var e=this.props,t=e.styles,e=(e=e.classes)||{},t=(t=t||{}).container;return T.createElement("div",{ref:this.containerRef,className:R()("react-bell-chat__chat-scroll-area",this.props.className,e.container),style:b(b(b(b(b({},d),void 0!==this.props.maxHeight?{maxHeight:this.props.maxHeight}:{}),void 0!==this.props.minHeight?{minHeight:this.props.minHeight}:{}),t),this.props.style),onScroll:this.onScroll},this.props.children)},g.prototype.onScroll=function(){this.scrollContainer&&this.scrollContainer.scrollTop<=this.props.loadOldMessagesThreshold&&this.props.onLoadOldMessages()},g.prototype.containerRef=function(t){var e=this;this.scrollContainer=t,this.props.apiRef&&this.props.apiRef({scrollToBottom:function(e){return void 0===e&&(e="auto"),t&&(t.scrollTo?t.scrollTo({top:t.scrollHeight,behavior:e}):t.scrollTop=t.scrollHeight)},scrollTo:function(e){return t&&(t.scrollTo?t.scrollTo({top:e}):t.scrollTop=e)},scrolledToBottom:function(){return e.scrollContainer.clientHeight+e.scrollContainer.scrollTop===e.scrollContainer.scrollHeight},scrolledToLoadThreshold:function(){return e.scrollContainer&&e.scrollContainer.scrollTop<=e.props.loadOldMessagesThreshold},scrollTop:function(){return e.scrollContainer&&e.scrollContainer.scrollTop},scrollHeight:function(){return e.scrollContainer&&e.scrollContainer.scrollHeight},clientHeight:function(){return e.scrollContainer&&e.scrollContainer.clientHeight}})},g);var m=function(){return(m=Object.assign||function(e){for(var t,s=1,r=arguments.length;s<r;s++)for(var o in t=arguments[s])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},y={width:20,height:20,lineHeight:"20px",fontWeight:400,fontSize:10,color:"white",backgroundColor:"rgb(153, 153, 153)",borderRadius:10,textAlign:"center",transition:"0.3s all ease-in-out",display:"block",position:"relative"},v={pointerEvents:"none"};const C=T.memo(function(e){var t=e.styles,s=(s=e.classes)||{},r=(t=t||{}).container,t=t.text;return e.author&&T.createElement("div",{style:m(m(m({},y),r),e.style),className:R()("react-bell-chat__last-seen-avatar",e.className,s.container)},T.createElement("span",{style:m(m({},v),t),className:R()("react-bell-chat__last-seen-avatar__text",s.text)},e.author.lastSeenAvatarName||e.author.name[0].toUpperCase()))});var w=function(){return(w=Object.assign||function(e){for(var t,s=1,r=arguments.length;s<r;s++)for(var o in t=arguments[s])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},O={systemChatBubbleContainer:{textAlign:"center",fontSize:12,color:"rgba(0, 0, 0, 0.55)"}};const _=T.memo(function(e){var t=e.styles,s=(s=e.classes)||{},r=(t=t||{}).systemChatBubbleContainer,o=t.systemChatBubbleText,t=e.message.createdOn&&e.message.createdOn.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!0});return e.message&&T.createElement("div",{className:R()("react-bell-chat__chat-bubble react-bell-chat__chat-bubble--system",e.className,s.chatBubble),style:w(w(w({},O.systemChatBubbleContainer),r),e.style)},t&&T.createElement("span",{className:R()("react-bell-chat__chat-bubble--system__created-on",s.createdOn),title:e.message.createdOn.toLocaleString(),style:w(w({},O.systemChatBubbleText),o)},t,":"," "),e.message.message)}),B={bubbleGroupWrapper:{marginTop:10,marginBottom:10,position:"relative"}};var A,M,e=(A=function(e,t){return(A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function s(){this.constructor=e}A(e,t),e.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}),x=function(){return(x=Object.assign||function(e){for(var t,s=1,r=arguments.length;s<r;s++)for(var o in t=arguments[s])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function E(e){return M.call(this,e)||this}const j=(M=T.PureComponent,e(E,M),E.prototype.renderGroup=function(r,o){var n=this,e=(this.props.styles||{}).bubbleGroupWrapper,t=this.props,a=t.bubblesCentered,i=t.chatBubbleStyles,l=t.lastSeenAvatarStyles,s=t.avatarStyles,c=t.classes,p=t.chatBubbleClasses,u=t.lastSeenAvatarClasses,h=t.avatarClasses,b=t.showRecipientAvatar,d=t.customChatBubble,g=t.customSystemChatBubble,f=t.showRecipientLastSeenMessage,m=t.customLastSeenAvatar,y=t.customMessageRender,v=d||S,C=g||_,d=r.map(function(t,e){var s={yourAuthorId:n.props.yourAuthorId,author:o,message:t,bubblesCentered:a,styles:i,lastSeenAvatarStyles:l,classes:p,lastSeenAvatarClasses:u,isFirstInGroup:0===e,isLastInGroup:e===r.length-1&&1<r.length,isCenterInGroup:e<r.length-1&&1<r.length,lastSeenByAuthors:n.props.authors&&n.props.authors.filter(function(e){return void 0!==e.lastSeenMessageId&&e.lastSeenMessageId===t.id}),showRecipientLastSeenMessage:f,customLastSeenAvatar:m,customMessageRender:y};return void 0!==t.authorId?T.createElement(v,x({key:e},s)):T.createElement(C,x({key:e},s))}),g=o&&this.props.yourAuthorId===o.id;return T.createElement("div",{style:x(x(x({},B.bubbleGroupWrapper),e),this.props.style),className:R()("react-bell-chat__bubble-group",c&&c.chatBubbleWrapper,this.props.className)},!g&&b&&o&&this.props.customAvatar&&T.createElement(this.props.customAvatar,{author:this.props.author,styles:s,classes:h}),d)},E.prototype.render=function(){var e=this.props,t=e.messages,e=e.author;return this.renderGroup(t,e)},E.defaultProps={messages:[],author:void 0,customAvatar:i,showRecipientLastSeenMessage:!1},E);const G={chatPanel:{display:"flex",flexDirection:"column",flexGrow:1,overflow:"hidden",position:"relative"},showRecipientAvatarChatMessages:{paddingLeft:50},showIsTypingChatMessages:{paddingBottom:24,position:"relative"},showRecipientLastSeenMessageChatMessages:{paddingRight:30},chatMessages:{paddingBottom:10,paddingTop:10,flex:1,display:"flex",flexDirection:"column",justifyContent:"flex-end"}};var N=function(){return(N=Object.assign||function(e){for(var t,s=1,r=arguments.length;s<r;s++)for(var o in t=arguments[s])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},P={textAlign:"center",fontSize:12,color:"rgba(0, 0, 0, 0.55)"};const H=T.memo(function(e){var t=e.styles,s=(s=e.classes)||{},t=(t=t||{}).container;return e.date&&T.createElement("div",{className:R()("react-bell-chat__date-row",e.className,s.container),style:N(N(N({},P),t),e.style),title:e.date.toLocaleDateString([],{weekday:"long",year:"numeric",month:"long",day:"numeric"})},e.date.toLocaleDateString())});var k=function(){return(k=Object.assign||function(e){for(var t,s=1,r=arguments.length;s<r;s++)for(var o in t=arguments[s])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},F={display:"flex",marginBottom:10},W="rgb(0, 132, 255)";const D=T.memo(function(e){var t=e.styles,s=(s=e.classes)||{},r=(t=t||{}).container,t=t.spinnerColor;return T.createElement("div",{className:R()("react-bell-chat__loading-messages",e.className,s.container),style:k(k(k({},F),r),e.style)},T.createElement("svg",{width:"40px",height:"40px",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",style:{background:"none",margin:"auto",fill:t||W,opacity:e.isVisible?1:0,transition:"0.3s all ease-in-out"}},T.createElement("title",null,"Loading messages"),T.createElement("path",{stroke:"none",d:"M10 50A40 40 0 0 0 90 50A40 46 0 0 1 10 50",transform:"rotate(42 50 53)"},T.createElement("animateTransform",{attributeName:"transform",type:"rotate",calcMode:"linear",values:"0 50 53;360 50 53",keyTimes:"0;1",dur:"1s",begin:"0s",repeatCount:"indefinite"}))))});var z,U,e=(z=function(e,t){return(z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function s(){this.constructor=e}z(e,t),e.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}),Y=function(){return(Y=Object.assign||function(e){for(var t,s=1,r=arguments.length;s<r;s++)for(var o in t=arguments[s])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},q=function(e,a,i,l){return new(i=i||Promise)(function(s,t){function r(e){try{n(l.next(e))}catch(e){t(e)}}function o(e){try{n(l.throw(e))}catch(e){t(e)}}function n(e){var t;e.done?s(e.value):((t=e.value)instanceof i?t:new i(function(e){e(t)})).then(r,o)}n((l=l.apply(e,a||[])).next())})},V=function(s,r){var o,n,a,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(a=2&t[0]?n.return:t[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,t[1])).done)return a;switch(n=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return i.label++,{value:t[1],done:!1};case 5:i.label++,n=t[1],t=[0];continue;case 7:t=i.ops.pop(),i.trys.pop();continue;default:if(!(a=0<(a=i.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){i=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){i.label=t[1];break}if(6===t[0]&&i.label<a[1]){i.label=a[1],a=t;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(t);break}a[2]&&i.ops.pop(),i.trys.pop();continue}t=r.call(s,i)}catch(e){t=[6,e],n=0}finally{o=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};function J(e){return T.createElement(S,Y({},e))}function K(e){return T.createElement(f,Y({},e))}function Q(e){return e.message&&e.message.message}function X(e){e=U.call(this,e)||this;return e.onLoadOldMessages=e.onLoadOldMessages.bind(e),e.apiRef=e.apiRef.bind(e),e.state={isLoadingMessages:!1},e}const Z=(U=T.PureComponent,e(X,U),X.prototype.onMessageSend=function(){this.scrollApi&&this.scrollApi.scrollToBottom()},X.prototype.componentDidMount=function(){this.scrollApi&&this.scrollApi.scrollToBottom()},X.prototype.getSnapshotBeforeUpdate=function(e,t){return{wasScrolledToBottom:this.scrollApi&&this.scrollApi.scrolledToBottom(),scrollHeight:this.scrollApi&&this.scrollApi.scrollHeight(),clientHeight:this.scrollApi&&this.scrollApi.clientHeight()}},X.prototype.componentDidUpdate=function(e,t,s){this.props.messages.length!==e.messages.length&&s&&s.wasScrolledToBottom?this.scrollApi.scrollToBottom():this.props.messages.length!==e.messages.length&&s&&t.isLoadingMessages&&(t=this.scrollApi&&this.scrollApi.scrollHeight(),this.scrollApi.scrollTo(t-s.scrollHeight))},X.prototype.renderMessages=function(e){var n=this,t=(this.props.styles,this.props),a=t.chatBubbleStyles,i=t.chatBubbleClasses,s=t.dateRowStyles,l=t.dateRowClasses,c=t.avatarStyles,p=t.avatarClasses,u=t.lastSeenAvatarStyles,h=t.lastSeenAvatarClasses,b=t.bubbleGroupStyles,d=t.bubbleGroupClasses,t=this.props,g=t.customChatBubble,f=t.showRecipientAvatar,m=function(e,r){if("function"!=typeof r)throw new Error("groupBy take a function as only parameter");return e.reduce(function(e,t){var s=r(t);return e[s]||(e[s]=[]),e[s].push(t),e},{})}(e,function(e){return e.createdOn&&e.createdOn.toDateString()}),y=[],v=0;return Object.keys(m).forEach(function(e){var r=[],o=m[e];o[0]&&o[0].createdOn&&n.props.showDateRow&&y.push(T.createElement(n.props.customDateRow,{key:e,date:o[0].createdOn,styles:s,classes:l})),y=y.concat(o.map(function(t,e){if(r.push(t),o[e+1]&&o[e+1].authorId===t.authorId)return null;var s=r,e=n.props.authors&&n.props.authors.filter(function(e){return e.id===t.authorId})[0];return r=[],v++,T.createElement(j,{key:v,yourAuthorId:n.props.yourAuthorId,messages:s,author:e,authors:n.props.authors,showRecipientAvatar:f,customChatBubble:g,chatBubbleStyles:a,chatBubbleClasses:i,avatarStyles:c,avatarClasses:p,lastSeenAvatarStyles:u,lastSeenAvatarClasses:h,showRecipientLastSeenMessage:n.props.showRecipientLastSeenMessage,customAvatar:n.props.customAvatar,customLastSeenAvatar:n.props.customLastSeenAvatar,customMessageRender:n.props.customMessageRender,customSystemChatBubble:n.props.customSystemChatBubble,classes:d,styles:b})}))}),y},X.prototype.renderIsTyping=function(){var t=this,e=(this.props.styles,this.props),s=e.isTypingStyles,r=e.isTypingClasses,e=this.props.authors&&this.props.authors.filter(function(e){return e.isTyping&&e.id!==t.props.yourAuthorId});return e&&0!==e.length?T.createElement(p,{typingAuthors:e,styles:s,classes:r}):null},X.prototype.apiRef=function(e){this.scrollApi||e.scrollToBottom(),this.scrollApi=e},X.prototype.render=function(){var e=this.props,t=(t=e.styles)||{},s=(s=e.classes)||{},r=this.props,o=r.loadingMessagesStyle,n=r.chatFeedStyles,a=r.chatScrollArea,e=r.loadingMessagesClasses,r=r.chatScrollAreaClasses;return T.createElement("div",{className:R()("react-bell-chat__chat-panel",this.props.className,s.chatPanel),style:Y(Y(Y({},G.chatPanel),n&&n.chatPanel),this.props.style)},T.createElement(this.props.customScrollArea,{minHeight:this.props.minHeight,maxHeight:this.props.maxHeight,apiRef:this.apiRef,loadOldMessagesThreshold:this.props.loadOldMessagesThreshold,onLoadOldMessages:this.onLoadOldMessages,styles:a,classes:r},T.createElement("div",{style:Y(Y(Y(Y(Y(Y(Y({},G.chatMessages),this.props.showRecipientAvatar&&G.showRecipientAvatarChatMessages),this.props.showRecipientAvatar&&t.showRecipientAvatarChatMessages),this.props.showIsTyping&&G.showIsTypingChatMessages),this.props.showIsTyping&&t.showIsTypingChatMessages),this.props.showRecipientLastSeenMessage&&G.showRecipientLastSeenMessageChatMessages),this.props.showRecipientLastSeenMessage&&t.showRecipientLastSeenMessageChatMessages),className:R()("react-bell-chat__chat-messages",s.chatMessages,this.props.showRecipientAvatar&&s.showRecipientAvatarChatMessages,this.props.showIsTyping&&s.showIsTypingChatMessages,this.props.showRecipientLastSeenMessage&&s.showRecipientLastSeenMessageChatMessages)},T.createElement(this.props.customLoadingMessages,{isVisible:this.props.showLoadingMessages||this.state.isLoadingMessages,styles:o,classes:e}),this.renderMessages(this.props.messages),this.props.showIsTyping&&this.renderIsTyping())))},X.prototype.onLoadOldMessages=function(){var t=this;if(!this.state.isLoadingMessages&&this.props.hasOldMessages)return new Promise(function(e){t.setState({isLoadingMessages:!0},function(){return e()})}).then(function(){return q(t,void 0,void 0,function(){return V(this,function(e){switch(e.label){case 0:return this.props.onLoadOldMessages?[4,this.props.onLoadOldMessages()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})}).then(function(){return q(t,void 0,void 0,function(){var t=this;return V(this,function(e){switch(e.label){case 0:return[4,new Promise(function(e){t.setState({isLoadingMessages:!1},function(){t.scrollApi.scrolledToLoadThreshold()&&t.scrollApi.scrollTo(t.props.loadOldMessagesThreshold+1),e()})})];case 1:return e.sent(),[2]}})})})},X.defaultProps={messages:[],authors:[],customChatBubble:J,customMessageRender:Q,customAvatar:i,customScrollArea:K,customLastSeenAvatar:C,customDateRow:H,customLoadingMessages:D,yourAuthorId:0,loadOldMessagesThreshold:50,customSystemChatBubble:_},X);var $=function(){return($=Object.assign||function(e){for(var t,s=1,r=arguments.length;s<r;s++)for(var o in t=arguments[s])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},ee={flex:1},te={border:"none",borderTopWidth:"1",borderTopStyle:"solid",borderTopColor:"#ddd",fontSize:"16",outline:"none",padding:"30",width:"100%"};const se=T.memo(function(e){var t=e.inputPlaceholder,s=(s=e.styles)||{},r=(r=e.classes)||{};return T.createElement("div",{className:R()("react-bell-chat__chat-input",e.className,r.chatInput),style:$($({},ee),s.chatInput)},T.createElement("input",{type:"text",className:R()("react-bell-chat__chat-input__input",r.input),style:$($({},te),s.input),placeholder:t}))})})(),oe})()});
//# sourceMappingURL=index.min.js.map