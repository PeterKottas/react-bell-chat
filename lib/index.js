!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("react"));else if("function"==typeof define&&define.amd)define(["react"],t);else{var r,s="object"==typeof exports?t(require("react")):t(e.react);for(r in s)("object"==typeof exports?exports:e)[r]=s[r]}}(self,function(t){return(()=>{var r={184:(e,t)=>{var r;
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/
!function(){"use strict";var a={}.hasOwnProperty;function l(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var s=typeof r;if("string"==s||"number"==s)e.push(r);else if(Array.isArray(r)&&r.length){var n=l.apply(null,r);n&&e.push(n)}else if("object"==s)for(var o in r)a.call(r,o)&&r[o]&&e.push(o)}}return e.join(" ")}e.exports?(l.default=l,e.exports=l):void 0===(r=function(){return l}.apply(t,[]))||(e.exports=r)}()},297:e=>{"use strict";e.exports=t}},s={};function Ge(e){var t=s[e];if(void 0!==t)return t.exports;t=s[e]={exports:{}};return r[e](t,t.exports,Ge),t.exports}Ge.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return Ge.d(t,{a:t}),t},Ge.d=(e,t)=>{for(var r in t)Ge.o(t,r)&&!Ge.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},Ge.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),Ge.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var Ee={};return(()=>{"use strict";Ge.r(Ee),Ge.d(Ee,{ChatBubble:()=>r,ChatFeed:()=>Le,ChatScrollArea:()=>O,DefaultAvatarClasses:()=>o,DefaultAvatarStyles:()=>s,DefaultChatBubbleClasses:()=>t,DefaultChatBubbleStyles:()=>e,DefaultChatFeedClasses:()=>Se,DefaultChatFeedStyles:()=>ye,DefaultChatMessagesContainerClasses:()=>te,DefaultChatMessagesContainerStyles:()=>se,DefaultChatScrollAreaClasses:()=>m,DefaultChatScrollAreaStyles:()=>f,DefaultDateRowClasses:()=>le,DefaultDateRowStyles:()=>ce,DefaultIsTypingClasses:()=>u,DefaultIsTypingStyles:()=>h,DefaultLastSeenAvatarClasses:()=>M,DefaultLastSeenAvatarStyles:()=>R,DefaultLoadingMessagesClasses:()=>ge,DefaultLoadingMessagesStyle:()=>de,DefaultSystemChatBubbleClasses:()=>k,DefaultSystemChatBubbleStyles:()=>F,SystemChatBubble:()=>U,defaultBubbleGroupClasses:()=>J,defaultBubbleGroupStyles:()=>q});var L=Ge(297),i=Ge(184),I=Ge.n(i),e={chatBubbleWrapper:{position:"relative",marginBottom:2,display:"flex"},chatBubble:{position:"relative",backgroundColor:"#0084FF",borderRadius:7,marginRight:"auto",marginLeft:"auto",maxWidth:"80%",paddingTop:8,paddingBottom:14,paddingLeft:14,paddingRight:14},userChatBubbleOrientationNormal:{marginRight:0},recipientChatBubbleOrientationNormal:{marginLeft:0},recipientChatBubble:{backgroundColor:"#ccc"},text:{color:"#FFFFFF",fontSize:16,fontWeight:300,margin:0,marginRight:30,whiteSpace:"pre"},userFirstChatBubbleInGroup:{borderTopRightRadius:0},recipientFirstChatBubbleInGroup:{borderTopLeftRadius:0},userLastChatBubbleInGroup:{borderTopRightRadius:0},recipientLastChatBubbleInGroup:{borderTopLeftRadius:0},userCenterChatBubbleInGroup:{borderTopRightRadius:0,borderBottomRightRadius:0},recipientCenterChatBubbleInGroup:{borderBottomLeftRadius:0,borderTopLeftRadius:0},createdOn:{position:"absolute",right:14,bottom:2,fontSize:9,color:"rgba(255, 255, 255, 0.55)"},isSend:{position:"absolute",right:2,bottom:2,fontSize:9},lastSeenByContainer:{position:"absolute",right:-30,top:0,width:20,height:"100%"},loadingSpinnerColor:"rgba(255, 255, 255, 0.55)",isSendIconColor:"#cddc39"};const G=e;var t={chatBubbleWrapper:"react-bell-chat__chat-bubble__wrapper",isSend:"react-bell-chat__chat-bubble__is-send",chatBubble:"react-bell-chat__chat-bubble",userChatBubble:"react-bell-chat__chat-bubble--user",recipientChatBubble:"react-bell-chat__chat-bubble--recipient",text:"react-bell-chat__chat-bubble__text",userText:"react-bell-chat__chat-bubble__text--user",recipientText:"react-bell-chat__chat-bubble__text--recipient",createdOn:"react-bell-chat__chat-bubble__created-on",userCreatedOn:"react-bell-chat__chat-bubble__created-on--user",recipientCreatedOn:"react-bell-chat__chat-bubble__created-on--recipient",lastSeenByContainer:"react-bell-chat__chat-bubble__last-seen-by__container"};const E=t;var j=function(){return(j=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};function r(r){if(!r.message)return null;var s=r.lastSeenAvatarStyles,e=r.yourAuthorId,n=r.lastSeenAvatarClasses,t=r.styles,o=r.classes,a=null!=t?t:{},l=a.userChatBubble,i=a.chatBubble,c=a.text,u=a.userText,p=a.recipientText,h=a.recipientChatBubble,d=a.firstChatBubbleInGroup,b=a.userFirstChatBubbleInGroup,g=a.recipientFirstChatBubbleInGroup,f=a.centerChatBubbleInGroup,v=a.userCenterChatBubbleInGroup,m=a.recipientCenterChatBubbleInGroup,y=a.lastChatBubbleInGroup,C=a.userLastChatBubbleInGroup,S=a.recipientLastChatBubbleInGroup,w=a.userChatBubbleOrientationNormal,B=a.recipientChatBubbleOrientationNormal,_=a.chatBubbleWrapper,O=a.createdOn,A=a.userCreatedOn,x=a.recipientCreatedOn,M=a.isSendIconColor,t=a.loadingSpinnerColor,a=a.lastSeenByContainer,e=r.message.authorId===e,C=j(j(j(j(j(j(j(j(j(j(j(j(j(j(j(j(j(j({},G.chatBubble),i),e?G.userChatBubble:G.recipientChatBubble),e?l:h),e?G.userChatBubbleOrientationNormal:G.recipientChatBubbleOrientationNormal),e?w:B),r.isFirstInGroup&&G.firstChatBubbleInGroup),r.isFirstInGroup&&(e?G.userFirstChatBubbleInGroup:G.recipientFirstChatBubbleInGroup)),r.isCenterInGroup&&G.centerChatBubbleInGroup),r.isCenterInGroup&&(e?G.userCenterChatBubbleInGroup:G.recipientCenterChatBubbleInGroup)),r.isLastInGroup&&G.lastChatBubbleInGroup),r.isLastInGroup&&(e?G.userLastChatBubbleInGroup:G.recipientLastChatBubbleInGroup)),r.isFirstInGroup&&d),r.isFirstInGroup&&(e?b:g)),r.isCenterInGroup&&f),r.isCenterInGroup&&(e?v:m)),r.isLastInGroup&&y),r.isLastInGroup&&(e?C:S)),S=j(j(j({},G.text),c),e?u:p),c=I()(E.text,null==o?void 0:o.text,e?E.userText:E.recipientText,e?null==o?void 0:o.userText:null==o?void 0:o.recipientText),u=L.useState(!1),T=u[0],R=u[1],p=L.useCallback(function(){return R(!0)},[]),u=L.useCallback(function(){return R(!1)},[]);return L.createElement("div",{style:j(j({},G.chatBubbleWrapper),_),className:I()(E.chatBubbleWrapper,null==o?void 0:o.chatBubbleWrapper)},L.createElement("div",{style:j({},C),className:I()(E.chatBubble,null==o?void 0:o.chatBubble,((C={})[E.recipientChatBubble]=!e,C[null==o?void 0:o.recipientChatBubble]=!e,C[E.userChatBubble]=e,C[null==o?void 0:o.userChatBubble]=e,C))},r.customMessageRender?r.customMessageRender({message:r.message,style:S,className:c}):L.createElement("span",{style:S,className:c},r.message.message),r.message.createdOn&&L.createElement("span",{style:j(j(j(j({},G.createdOn),O),e?G.userCreatedOn:G.recipientCreatedOn),e?A:x),className:I()(E.createdOn,null==o?void 0:o.createdOn,((x={})[E.userCreatedOn]=e,x[null==o?void 0:o.userCreatedOn]=e,x[E.recipientCreatedOn]=!e,x[null==o?void 0:o.recipientCreatedOn]=!e,x)),title:r.message.createdOn.toLocaleString()},r.message.createdOn.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!0})),void 0!==r.message.isSend&&e&&L.createElement("span",{style:j({},G.isSend),className:I()(E.isSend,null==o?void 0:o.isSend)},r.message.isSend?L.createElement("svg",{width:"10px",height:"10px",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 10 10",preserveAspectRatio:"xMidYMid",style:{background:"none"}},L.createElement("path",j({fill:M||G.isSendIconColor},{},{d:"M9,1.7L8.6,1.4C8.5,1.3,8.3,1.3,8.2,1.4L3.9,7C3.8,7.1,3.6,7.1,3.5,7c0,0,0,0,0,0L1.7,5.3c-0.1-0.1-0.3-0.1-0.4,0L1,5.6 C0.9,5.7,0.9,5.9,1,6l2.6,2.6c0.1,0.1,0.3,0.1,0.4,0L9,2.1C9.1,2,9.1,1.8,9,1.7z"}))):L.createElement("svg",{width:"10px",height:"10px",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",style:{background:"none"}},L.createElement("path",{stroke:"none",d:"M10 50A40 40 0 0 0 90 50A40 45 0 0 1 10 50",fill:t||G.loadingSpinnerColor,transform:"rotate(78 50 52.5)"},L.createElement("animateTransform",{attributeName:"transform",type:"rotate",calcMode:"linear",values:"0 50 52.5;360 50 52.5",keyTimes:"0;1",dur:"1s",begin:"0s",repeatCount:"indefinite"}))))),r.showRecipientLastSeenMessage&&r.lastSeenByAuthors&&0<r.lastSeenByAuthors.length&&r.customLastSeenAvatar&&L.createElement("div",{style:j(j({},G.lastSeenByContainer),a),className:I()(E.lastSeenByContainer,null==o?void 0:o.lastSeenByContainer),onMouseEnter:p,onMouseLeave:u},r.lastSeenByAuthors.map(function(e,t){return L.createElement(r.customLastSeenAvatar,{key:t,author:e,styles:s,index:t,mouseOver:T,classes:n})})))}const S=r;var s={container:{position:"absolute",left:-50,top:0,width:40,height:40,lineHeight:"40px",fontWeight:400,color:"white",backgroundColor:"rgb(153, 153, 153)",borderRadius:20,textAlign:"center",borderTopRightRadius:5},text:{pointerEvents:"none"}};const n=s;var o={container:"react-bell-chat__avatar",text:"react-bell-chat__avatar__text"};const a=o;var l=function(){return(l=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};const c=L.memo(function(e){var t=e.author,r=e.classes,s=e.styles;return t&&L.createElement("div",{style:l(l({},n.container),null==s?void 0:s.container),title:t.name,className:I()(a.container,null==r?void 0:r.container)},L.createElement("span",{style:l(l({},null==s?void 0:s.text),e.styles&&(null===(e=e.styles)||void 0===e?void 0:e.text)),className:I()(a.text,null==r?void 0:r.text)},t.avatarName||t.name.split(" ").map(function(e){return e[0]}).join("").toUpperCase().substr(0,3)))});var u={container:"react-bell-chat__is-typing__container"};const p=u;var h={container:{position:"absolute",bottom:2,left:0,right:0,color:"rgb(204, 204, 204)",textAlign:"center"}};const d=h;var b=function(){return(b=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};const g=L.memo(function(e){var t=e.styles,r=e.classes,s=L.useMemo(function(){return b(b({},d.container),null==t?void 0:t.container)},[null==t?void 0:t.container]);return e.typingAuthors&&0<e.typingAuthors.length&&L.createElement("div",{className:I()(p.container,null==r?void 0:r.container),style:s},e.typingAuthors.map(function(e){return e.name}).join(", ").replace(/,(?!.*,)/gim," and")+(1===e.typingAuthors.length?" is ":" are ")+"typing")});var f={container:{overflow:"auto",padding:"0 10px",display:"flex",flexDirection:"column",height:"100%"}};const v=f;var m={container:"react-bell-chat__chat-scroll-area"};const y=m;var C,w,B=(C=function(e,t){return(C=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}C(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),_=function(){return(_=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},O=(w=L.PureComponent,B(A,w),A.prototype.render=function(){var e=this.props,t=e.styles,e=e.classes;return L.createElement("div",{ref:this.containerRef,className:I()(y.container,null==e?void 0:e.container),style:_(_(_(_({},v.container),void 0!==this.props.maxHeight?{maxHeight:this.props.maxHeight}:{}),void 0!==this.props.minHeight?{minHeight:this.props.minHeight}:{}),null==t?void 0:t.container),onScroll:this.onScroll},this.props.children)},A.prototype.onScroll=function(){this.scrollContainer&&this.scrollContainer.scrollTop<=this.props.loadOldMessagesThreshold&&this.props.onLoadOldMessages()},A.prototype.containerRef=function(t){var e=this;this.scrollContainer=t,this.props.apiRef&&this.props.apiRef({scrollToBottom:function(e){return void 0===e&&(e="auto"),t&&(t.scrollTo?t.scrollTo({top:t.scrollHeight,behavior:e}):t.scrollTop=t.scrollHeight)},scrollTo:function(e){return t&&(t.scrollTo?t.scrollTo({top:e}):t.scrollTop=e)},scrolledToBottom:function(){return e.scrollContainer.clientHeight+e.scrollContainer.scrollTop===e.scrollContainer.scrollHeight},scrolledToLoadThreshold:function(){return e.scrollContainer&&e.scrollContainer.scrollTop<=e.props.loadOldMessagesThreshold},scrollTop:function(){return e.scrollContainer&&e.scrollContainer.scrollTop},scrollHeight:function(){return e.scrollContainer&&e.scrollContainer.scrollHeight},clientHeight:function(){return e.scrollContainer&&e.scrollContainer.clientHeight}})},A);function A(e){e=w.call(this,e)||this;return e.containerRef=e.containerRef.bind(e),e.onScroll=e.onScroll.bind(e),e}const x=O;var M={container:"react-bell-chat__last-seen-avatar",text:"react-bell-chat__last-seen-avatar__text"};const T=M;var R={container:{width:20,height:20,lineHeight:"20px",fontWeight:400,fontSize:10,color:"white",backgroundColor:"rgb(153, 153, 153)",borderRadius:10,textAlign:"center",transition:"0.3s all ease-in-out",display:"block",position:"relative"},text:{pointerEvents:"none"}};const P=R;var D=function(){return(D=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};const N=L.memo(function(e){var t=e.styles,r=e.classes,s=e.index,n=e.mouseOver,o=L.useMemo(function(){return D(D(D({},P.container),null==t?void 0:t.container),0<s&&!n?{marginTop:-12}:{marginTop:-4})},[null==t?void 0:t.container,s,n]),a=L.useMemo(function(){return D(D({},P.text),null==t?void 0:t.text)},[null==t?void 0:t.text]);return e.author&&L.createElement("div",{style:o,className:I()(T.container,null==r?void 0:r.container)},L.createElement("span",{style:a,className:I()(T.text,null==r?void 0:r.text)},e.author.lastSeenAvatarName||e.author.name[0].toUpperCase()))});var k={chatBubbleWrapper:i(E.chatBubbleWrapper,"react-bell-chat__chat-bubble--system"),createdOn:"react-bell-chat__chat-bubble--system__created-on"};const H=k;var F={systemChatBubbleContainer:{textAlign:"center",fontSize:12,color:"rgba(0, 0, 0, 0.55)"}};const W=F;var z=function(){return(z=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};function U(e){var t=e.styles,r=e.classes,s=e.message,n=s.createdOn&&s.createdOn.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!0}),o=L.useMemo(function(){return z(z({},W.systemChatBubbleContainer),null==t?void 0:t.systemChatBubbleContainer)},[null==t?void 0:t.systemChatBubbleContainer]),a=L.useMemo(function(){return z(z({},W.systemChatBubbleText),null==t?void 0:t.systemChatBubbleText)},[null==t?void 0:t.systemChatBubbleText]);return s&&L.createElement("div",{className:I()(H.chatBubbleWrapper,null==r?void 0:r.chatBubbleWrapper),style:o},n&&L.createElement("span",{className:I()(H.createdOn,null==r?void 0:r.createdOn),title:e.message.createdOn.toLocaleString(),style:a},n,":"," "),e.message.message)}const Y=L.memo(U);var q={bubbleGroupWrapper:{marginTop:10,marginBottom:10,position:"relative"}};const V=q;var J={chatBubbleWrapper:"react-bell-chat__bubble-group"};const K=J;var Q,X,B=(Q=function(e,t){return(Q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Q(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),Z=function(){return(Z=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};function $(e){return X.call(this,e)||this}const ee=(X=L.PureComponent,B($,X),$.prototype.renderGroup=function(s,n){var o=this,e=(this.props.styles||{}).bubbleGroupWrapper,t=this.props,a=t.bubblesCentered,l=t.chatBubbleStyles,i=t.lastSeenAvatarStyles,r=t.avatarStyles,c=t.classes,u=t.chatBubbleClasses,p=t.lastSeenAvatarClasses,h=t.avatarClasses,d=t.showRecipientAvatar,b=t.customChatBubble,g=t.customSystemChatBubble,f=t.showRecipientLastSeenMessage,v=t.customLastSeenAvatar,m=t.customMessageRender,y=b||S,C=g||Y,b=s.map(function(t,e){var r={yourAuthorId:o.props.yourAuthorId,author:n,message:t,bubblesCentered:a,styles:l,lastSeenAvatarStyles:i,classes:u,lastSeenAvatarClasses:p,isFirstInGroup:0===e,isLastInGroup:e===s.length-1&&1<s.length,isCenterInGroup:e<s.length-1&&1<s.length,lastSeenByAuthors:o.props.authors&&o.props.authors.filter(function(e){return void 0!==e.lastSeenMessageId&&e.lastSeenMessageId===t.id}),showRecipientLastSeenMessage:f,customLastSeenAvatar:v,customMessageRender:m};return void 0!==t.authorId?L.createElement(y,Z({key:e},r)):L.createElement(C,Z({key:e},r))}),g=n&&this.props.yourAuthorId===n.id;return L.createElement("div",{style:Z(Z(Z({},V.bubbleGroupWrapper),e),this.props.style),className:I()(K.chatBubbleWrapper,null==c?void 0:c.chatBubbleWrapper,this.props.className)},!g&&d&&n&&this.props.customAvatar&&L.createElement(this.props.customAvatar,{author:this.props.author,styles:r,classes:h}),b)},$.prototype.render=function(){var e=this.props,t=e.messages,e=e.author;return this.renderGroup(t,e)},$.defaultProps={messages:[],author:void 0,customAvatar:c,showRecipientLastSeenMessage:!1},$);var te={root:"react-bell-chat__chat-messages",showRecipientAvatar:"react-bell-chat__chat-messages--showRecipientAvatar",showRecipientLastSeenMessage:"react-bell-chat__chat-messages--showRecipientLastSeenMessage",showIsTyping:"react-bell-chat__chat-messages--showIsTyping"};const re=te;var se={root:{paddingBottom:10,paddingTop:10,flex:1,display:"flex",flexDirection:"column",justifyContent:"flex-end"},showRecipientAvatar:{paddingLeft:50},showIsTyping:{paddingBottom:24,position:"relative"},showRecipientLastSeenMessage:{paddingRight:30}};const ne=se;var oe=function(){return(oe=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};const ae=function(e){var t=e.children,r=e.classes,s=e.styles,n=e.showIsTyping,o=e.showRecipientAvatar,a=e.showRecipientLastSeenMessage,l=L.useMemo(function(){return oe(oe(oe(oe(oe(oe(oe(oe({},null===ne||void 0===ne?void 0:ne.root),null==s?void 0:s.root),o&&(null===ne||void 0===ne?void 0:ne.showRecipientAvatar)),o&&(null==s?void 0:s.showRecipientAvatar)),n&&(null===ne||void 0===ne?void 0:ne.showIsTyping)),n&&(null==s?void 0:s.showIsTyping)),a&&(null===ne||void 0===ne?void 0:ne.showRecipientLastSeenMessage)),a&&(null==s?void 0:s.showRecipientLastSeenMessage))},[n,o,a,null==s?void 0:s.root,null==s?void 0:s.showRecipientAvatar,null==s?void 0:s.showIsTyping,null==s?void 0:s.showRecipientLastSeenMessage]),e=i(re.root,null==r?void 0:r.root,((e={})[null===re||void 0===re?void 0:re.showRecipientAvatar]=o,e[null==r?void 0:r.showRecipientAvatar]=o,e[null===re||void 0===re?void 0:re.showIsTyping]=n,e[null==r?void 0:r.showIsTyping]=n,e[null===re||void 0===re?void 0:re.showRecipientLastSeenMessage]=a,e[null==r?void 0:r.showRecipientLastSeenMessage]=a,e));return L.createElement("div",{style:l,className:e},t)};var le={container:"react-bell-chat__date-row"};const ie=le;var ce={container:{textAlign:"center",fontSize:12,color:"rgba(0, 0, 0, 0.55)"}};const ue=ce;var pe=function(){return(pe=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};const he=L.memo(function(e){var t=e.styles,r=e.classes,s=L.useMemo(function(){return pe(pe({},ue.container),null==t?void 0:t.container)},[null==t?void 0:t.container]);return e.date&&L.createElement("div",{className:I()(ie.container,null==r?void 0:r.container),style:s,title:e.date.toLocaleDateString([],{weekday:"long",year:"numeric",month:"long",day:"numeric"})},e.date.toLocaleDateString())});var de={container:{display:"flex",marginBottom:10},spinnerColor:"rgb(0, 132, 255)"};const be=de;var ge={container:"react-bell-chat__loading-messages"};const fe=ge;var ve=function(){return(ve=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};const me=L.memo(function(t){var r=t.styles,e=t.classes,s=L.useMemo(function(){return ve(ve({},be.container),null==r?void 0:r.container)},[null==r?void 0:r.container]),n=L.useMemo(function(){var e;return{background:"none",margin:"auto",fill:null!==(e=null==r?void 0:r.spinnerColor)&&void 0!==e?e:be.spinnerColor,opacity:t.isVisible?1:0,transition:"0.3s all ease-in-out"}},[null==r?void 0:r.spinnerColor]);return L.createElement("div",{className:I()(fe.container,t.className,null==e?void 0:e.container),style:s},L.createElement("svg",{width:"40px",height:"40px",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",style:n},L.createElement("path",{stroke:"none",d:"M10 50A40 40 0 0 0 90 50A40 46 0 0 1 10 50",transform:"rotate(42 50 53)"},L.createElement("animateTransform",{attributeName:"transform",type:"rotate",calcMode:"linear",values:"0 50 53;360 50 53",keyTimes:"0;1",dur:"1s",begin:"0s",repeatCount:"indefinite"}))))});var ye={chatPanel:{display:"flex",flexDirection:"column",flexGrow:1,overflow:"hidden",position:"relative"}};const Ce=ye;var Se={chatPanel:"react-bell-chat__chat-panel"};const we=Se;var Be,B=(Be=function(e,t){return(Be=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Be(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),_e=function(){return(_e=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},Oe=function(e,a,l,i){return new(l=l||Promise)(function(r,t){function s(e){try{o(i.next(e))}catch(e){t(e)}}function n(e){try{o(i.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?r(e.value):((t=e.value)instanceof l?t:new l(function(e){e(t)})).then(s,n)}o((i=i.apply(e,a||[])).next())})},Ae=function(r,s){var n,o,a,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,o&&(a=2&t[0]?o.return:t[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,t[1])).done)return a;switch(o=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,o=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!(a=0<(a=l.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){l.label=t[1];break}if(6===t[0]&&l.label<a[1]){l.label=a[1],a=t;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(t);break}a[2]&&l.ops.pop(),l.trys.pop();continue}t=s.call(r,l)}catch(e){t=[6,e],o=0}finally{n=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};function xe(e){return L.createElement(S,_e({},e))}function Me(e){return L.createElement(x,_e({},e))}function Te(e){return e.message&&e.message.message}var Re,Le=(Re=L.PureComponent,B(Ie,Re),Ie.prototype.onMessageSend=function(){this.scrollApi&&this.scrollApi.scrollToBottom()},Ie.prototype.componentDidMount=function(){this.scrollApi&&this.scrollApi.scrollToBottom()},Ie.prototype.getSnapshotBeforeUpdate=function(e,t){return{wasScrolledToBottom:this.scrollApi&&this.scrollApi.scrolledToBottom(),scrollHeight:this.scrollApi&&this.scrollApi.scrollHeight(),clientHeight:this.scrollApi&&this.scrollApi.clientHeight()}},Ie.prototype.componentDidUpdate=function(e,t,r){this.props.messages.length!==e.messages.length&&r&&r.wasScrolledToBottom?this.scrollApi.scrollToBottom():this.props.messages.length!==e.messages.length&&r&&t.isLoadingMessages&&(t=this.scrollApi&&this.scrollApi.scrollHeight(),this.scrollApi.scrollTo(t-r.scrollHeight))},Ie.prototype.renderMessages=function(e){var o=this,t=(this.props.styles,this.props),a=t.chatBubbleStyles,l=t.chatBubbleClasses,r=t.dateRowStyles,i=t.dateRowClasses,c=t.avatarStyles,u=t.avatarClasses,p=t.lastSeenAvatarStyles,h=t.lastSeenAvatarClasses,d=t.bubbleGroupStyles,b=t.bubbleGroupClasses,t=this.props,g=t.customChatBubble,f=t.showRecipientAvatar,v=function(e,s){if("function"!=typeof s)throw new Error("groupBy take a function as only parameter");return e.reduce(function(e,t){var r=s(t);return e[r]||(e[r]=[]),e[r].push(t),e},{})}(e,function(e){return e.createdOn&&e.createdOn.toDateString()}),m=[],y=0;return Object.keys(v).forEach(function(e){var s=[],n=v[e];n[0]&&n[0].createdOn&&o.props.showDateRow&&m.push(L.createElement(o.props.customDateRow,{key:e,date:n[0].createdOn,styles:r,classes:i})),m=m.concat(n.map(function(t,e){if(s.push(t),n[e+1]&&n[e+1].authorId===t.authorId)return null;var r=s,e=o.props.authors&&o.props.authors.filter(function(e){return e.id===t.authorId})[0];return s=[],y++,L.createElement(ee,{key:y,yourAuthorId:o.props.yourAuthorId,messages:r,author:e,authors:o.props.authors,showRecipientAvatar:f,customChatBubble:g,chatBubbleStyles:a,chatBubbleClasses:l,avatarStyles:c,avatarClasses:u,lastSeenAvatarStyles:p,lastSeenAvatarClasses:h,showRecipientLastSeenMessage:o.props.showRecipientLastSeenMessage,customAvatar:o.props.customAvatar,customLastSeenAvatar:o.props.customLastSeenAvatar,customMessageRender:o.props.customMessageRender,customSystemChatBubble:o.props.customSystemChatBubble,classes:b,styles:d})}))}),m},Ie.prototype.renderIsTyping=function(){var t=this,e=(this.props.styles,this.props),r=e.isTypingStyles,s=e.isTypingClasses,e=this.props.authors&&this.props.authors.filter(function(e){return e.isTyping&&e.id!==t.props.yourAuthorId});return e&&0!==e.length?L.createElement(g,{typingAuthors:e,styles:r,classes:s}):null},Ie.prototype.apiRef=function(e){this.scrollApi||e.scrollToBottom(),this.scrollApi=e},Ie.prototype.render=function(){var e=this.props,t=(e.styles,(t=e.classes)||{}),r=this.props,s=r.loadingMessagesStyle,n=r.chatFeedStyles,o=r.chatScrollAreaStyles,e=r.loadingMessagesClasses,r=r.chatScrollAreaClasses;return L.createElement("div",{className:I()(we.chatPanel,this.props.className,null==t?void 0:t.chatPanel),style:_e(_e(_e({},Ce.chatPanel),n&&n.chatPanel),this.props.style)},L.createElement(this.props.customScrollArea,{minHeight:this.props.minHeight,maxHeight:this.props.maxHeight,apiRef:this.apiRef,loadOldMessagesThreshold:this.props.loadOldMessagesThreshold,onLoadOldMessages:this.onLoadOldMessages,styles:o,classes:r},L.createElement(this.props.customChatMessagesContainer,{classes:this.props.chatMessagesContainerClasses,styles:this.props.chatMessagesContainerStyles,showIsTyping:this.props.showIsTyping,showRecipientAvatar:this.props.showRecipientAvatar,showRecipientLastSeenMessage:this.props.showRecipientLastSeenMessage},L.createElement(this.props.customLoadingMessages,{isVisible:this.props.showLoadingMessages||this.state.isLoadingMessages,styles:s,classes:e}),this.renderMessages(this.props.messages),this.props.showIsTyping&&this.renderIsTyping())))},Ie.prototype.onLoadOldMessages=function(){var t=this;if(!this.state.isLoadingMessages&&this.props.hasOldMessages)return new Promise(function(e){t.setState({isLoadingMessages:!0},function(){return e()})}).then(function(){return Oe(t,void 0,void 0,function(){return Ae(this,function(e){switch(e.label){case 0:return this.props.onLoadOldMessages?[4,this.props.onLoadOldMessages()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})}).then(function(){return Oe(t,void 0,void 0,function(){var t=this;return Ae(this,function(e){switch(e.label){case 0:return[4,new Promise(function(e){t.setState({isLoadingMessages:!1},function(){t.scrollApi.scrolledToLoadThreshold()&&t.scrollApi.scrollTo(t.props.loadOldMessagesThreshold+1),e()})})];case 1:return e.sent(),[2]}})})})},Ie.defaultProps={messages:[],authors:[],customChatBubble:xe,customMessageRender:Te,customAvatar:c,customScrollArea:Me,customChatMessagesContainer:ae,customLastSeenAvatar:N,customDateRow:he,customLoadingMessages:me,yourAuthorId:0,loadOldMessagesThreshold:50,customSystemChatBubble:Y},Ie);function Ie(e){e=Re.call(this,e)||this;return e.onLoadOldMessages=e.onLoadOldMessages.bind(e),e.apiRef=e.apiRef.bind(e),e.state={isLoadingMessages:!1},e}})(),Ee})()});
//# sourceMappingURL=index.js.map