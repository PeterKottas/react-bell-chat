!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("react"));else if("function"==typeof define&&define.amd)define(["react"],t);else{var r,s="object"==typeof exports?t(require("react")):t(e.react);for(r in s)("object"==typeof exports?exports:e)[r]=s[r]}}(self,function(t){return(()=>{var r={184:(e,t)=>{var r;
/*!
  Copyright (c) 2018 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/
!function(){"use strict";var o={}.hasOwnProperty;function l(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var s,n=typeof r;if("string"==n||"number"==n)e.push(r);else if(Array.isArray(r))!r.length||(s=l.apply(null,r))&&e.push(s);else if("object"==n)if(r.toString===Object.prototype.toString)for(var a in r)o.call(r,a)&&r[a]&&e.push(a);else e.push(r.toString())}}return e.join(" ")}e.exports?(l.default=l,e.exports=l):void 0===(r=function(){return l}.apply(t,[]))||(e.exports=r)}()},297:e=>{"use strict";e.exports=t}},s={};function ne(e){var t=s[e];if(void 0!==t)return t.exports;t=s[e]={exports:{}};return r[e](t,t.exports,ne),t.exports}ne.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return ne.d(t,{a:t}),t},ne.d=(e,t)=>{for(var r in t)ne.o(t,r)&&!ne.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},ne.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),ne.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var ae={};return(()=>{"use strict";ne.r(ae),ne.d(ae,{Avatar:()=>s,BubbleGroup:()=>O,ChatBubble:()=>t,ChatFeed:()=>re,ChatMessagesContainer:()=>R,ChatScrollArea:()=>f,DateRow:()=>H,IsTyping:()=>h,LastSeenAvatar:()=>S,LoadingMessages:()=>U,SystemChatBubble:()=>J,defaultAvatarClasses:()=>o,defaultAvatarStyles:()=>a,defaultBubbleGroupClasses:()=>B,defaultBubbleGroupStyles:()=>w,defaultChatBubbleClasses:()=>N,defaultChatBubbleConfig:()=>P,defaultChatBubbleStyles:()=>j,defaultChatFeedClasses:()=>Q,defaultChatFeedStyles:()=>K,defaultChatMessagesContainerClasses:()=>A,defaultChatMessagesContainerStyles:()=>x,defaultChatScrollAreaClasses:()=>b,defaultChatScrollAreaStyles:()=>d,defaultDateRowClasses:()=>M,defaultDateRowStyles:()=>L,defaultIsTypingClasses:()=>n,defaultIsTypingStyles:()=>i,defaultLastSeenAvatarClasses:()=>v,defaultLastSeenAvatarStyles:()=>y,defaultLoadingMessagesClasses:()=>F,defaultLoadingMessagesStyle:()=>W,defaultSystemChatBubbleClasses:()=>z,defaultSystemChatBubbleStyles:()=>V});var G=ne(297),e=ne(184),E=ne.n(e),j={chatBubbleWrapper:{position:"relative",marginBottom:2,display:"flex"},chatBubble:{position:"relative",borderTopRightRadius:7,borderTopLeftRadius:7,borderBottomRightRadius:7,borderBottomLeftRadius:7,marginRight:"auto",marginLeft:"auto",maxWidth:"80%",paddingTop:8,paddingBottom:14,paddingLeft:14,paddingRight:14},userChatBubbleOrientationNormal:{marginRight:0},recipientChatBubbleOrientationNormal:{marginLeft:0},recipientChatBubble:{},text:{fontSize:16,fontWeight:300,margin:0,marginRight:30,overflowWrap:"break-word",wordWrap:"break-word",hyphens:"auto"},userFirstChatBubbleInGroup:{borderTopRightRadius:0},recipientFirstChatBubbleInGroup:{borderTopLeftRadius:0},userLastChatBubbleInGroup:{borderTopRightRadius:0},recipientLastChatBubbleInGroup:{borderTopLeftRadius:0},userCenterChatBubbleInGroup:{borderTopRightRadius:0,borderBottomRightRadius:0},recipientCenterChatBubbleInGroup:{borderBottomLeftRadius:0,borderTopLeftRadius:0},createdOn:{position:"absolute",right:14,bottom:2,fontSize:9,opacity:.5},isSend:{position:"absolute",right:2,bottom:1,fontSize:9,opacity:.5},lastSeenByContainer:{position:"absolute",right:-30,top:0,width:20,height:"100%"},loadingSpinnerColor:"currentColor",isSendIconColor:"currentColor"},N={chatBubbleWrapper:"react-bell-chat__chat-bubble__wrapper",isSend:"react-bell-chat__chat-bubble__is-send",chatBubble:"react-bell-chat__chat-bubble",userChatBubble:"react-bell-chat__chat-bubble--user",recipientChatBubble:"react-bell-chat__chat-bubble--recipient",text:"react-bell-chat__chat-bubble__text",userText:"react-bell-chat__chat-bubble__text--user",recipientText:"react-bell-chat__chat-bubble__text--recipient",createdOn:"react-bell-chat__chat-bubble__created-on",userCreatedOn:"react-bell-chat__chat-bubble__created-on--user",recipientCreatedOn:"react-bell-chat__chat-bubble__created-on--recipient",lastSeenByContainer:"react-bell-chat__chat-bubble__last-seen-by__container"},P={formatTime:function(e){return null==e?void 0:e.toLocaleTimeString([],{hour:"numeric",minute:"numeric",hour12:!0})}},k=function(){return(k=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};function t(r){if(!r.message)return null;var s=r.lastSeenAvatarStyles,e=r.yourAuthorId,n=r.lastSeenAvatarClasses,t=r.styles,a=r.classes,o=r.config,l=k(k({},P),o),i=null!=t?t:{},u=i.userChatBubble,c=i.chatBubble,p=i.text,h=i.userText,d=i.recipientText,b=i.recipientChatBubble,g=i.firstChatBubbleInGroup,f=i.userFirstChatBubbleInGroup,m=i.recipientFirstChatBubbleInGroup,v=i.centerChatBubbleInGroup,y=i.userCenterChatBubbleInGroup,C=i.recipientCenterChatBubbleInGroup,S=i.lastChatBubbleInGroup,B=i.userLastChatBubbleInGroup,w=i.recipientLastChatBubbleInGroup,_=i.userChatBubbleOrientationNormal,O=i.recipientChatBubbleOrientationNormal,A=i.chatBubbleWrapper,x=i.createdOn,T=i.userCreatedOn,R=i.recipientCreatedOn,M=i.isSendIconColor,o=i.isSend,t=i.loadingSpinnerColor,i=i.lastSeenByContainer,e=r.message.authorId===e,B=k(k(k(k(k(k(k(k(k(k(k(k(k(k(k(k(k(k({},j.chatBubble),c),e?j.userChatBubble:j.recipientChatBubble),e?u:b),e?j.userChatBubbleOrientationNormal:j.recipientChatBubbleOrientationNormal),e?_:O),r.isFirstInGroup&&j.firstChatBubbleInGroup),r.isFirstInGroup&&(e?j.userFirstChatBubbleInGroup:j.recipientFirstChatBubbleInGroup)),r.isCenterInGroup&&j.centerChatBubbleInGroup),r.isCenterInGroup&&(e?j.userCenterChatBubbleInGroup:j.recipientCenterChatBubbleInGroup)),r.isLastInGroup&&j.lastChatBubbleInGroup),r.isLastInGroup&&(e?j.userLastChatBubbleInGroup:j.recipientLastChatBubbleInGroup)),r.isFirstInGroup&&g),r.isFirstInGroup&&(e?f:m)),r.isCenterInGroup&&v),r.isCenterInGroup&&(e?y:C)),r.isLastInGroup&&S),r.isLastInGroup&&(e?B:w)),w=k(k(k({},j.text),p),e?h:d),p=E()(N.text,null==a?void 0:a.text,e?N.userText:N.recipientText,e?null==a?void 0:a.userText:null==a?void 0:a.recipientText),h=G.useState(!1),L=h[0],I=h[1],d=G.useCallback(function(){return I(!0)},[]),h=G.useCallback(function(){return I(!1)},[]);return G.createElement("div",{style:k(k({},j.chatBubbleWrapper),A),className:E()(N.chatBubbleWrapper,null==a?void 0:a.chatBubbleWrapper)},G.createElement("div",{style:k({},B),className:E()(N.chatBubble,null==a?void 0:a.chatBubble,((A={})[N.recipientChatBubble]=!e,A[null!==(B=null==a?void 0:a.recipientChatBubble)&&void 0!==B?B:""]=!e,A[N.userChatBubble]=e,A[null!==(B=null==a?void 0:a.userChatBubble)&&void 0!==B?B:""]=e,A))},r.CustomMessageRender?G.createElement(r.CustomMessageRender,{message:r.message,style:w,className:p}):G.createElement("span",{style:w,className:p},r.message.message),r.message.createdOn&&G.createElement("span",{style:k(k(k(k({},j.createdOn),x),e?j.userCreatedOn:j.recipientCreatedOn),e?T:R),className:E()(N.createdOn,null==a?void 0:a.createdOn,((T={})[N.userCreatedOn]=e,T[null!==(R=null==a?void 0:a.userCreatedOn)&&void 0!==R?R:""]=e,T[N.recipientCreatedOn]=!e,T[null!==(R=null==a?void 0:a.recipientCreatedOn)&&void 0!==R?R:""]=!e,T)),title:r.message.createdOn.toLocaleString()},l.formatTime(r.message.createdOn)),void 0!==r.message.isSend&&e&&G.createElement("span",{style:k(k({},j.isSend),o),className:E()(N.isSend,null==a?void 0:a.isSend)},r.message.isSend?G.createElement("svg",{width:"10px",height:"10px",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 10 10",preserveAspectRatio:"xMidYMid",style:{background:"none"}},G.createElement("path",k({fill:M||j.isSendIconColor},{},{d:"M9,1.7L8.6,1.4C8.5,1.3,8.3,1.3,8.2,1.4L3.9,7C3.8,7.1,3.6,7.1,3.5,7c0,0,0,0,0,0L1.7,5.3c-0.1-0.1-0.3-0.1-0.4,0L1,5.6 C0.9,5.7,0.9,5.9,1,6l2.6,2.6c0.1,0.1,0.3,0.1,0.4,0L9,2.1C9.1,2,9.1,1.8,9,1.7z"}))):G.createElement("svg",{width:"10px",height:"10px",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",style:{background:"none"}},G.createElement("path",{stroke:"none",d:"M10 50A40 40 0 0 0 90 50A40 45 0 0 1 10 50",fill:t||j.loadingSpinnerColor,transform:"rotate(78 50 52.5)"},G.createElement("animateTransform",{attributeName:"transform",type:"rotate",calcMode:"linear",values:"0 50 52.5;360 50 52.5",keyTimes:"0;1",dur:"1s",begin:"0s",repeatCount:"indefinite"}))))),r.showRecipientLastSeenMessage&&r.lastSeenByAuthors&&0<r.lastSeenByAuthors.length&&r.CustomLastSeenAvatar&&G.createElement("div",{style:k(k({},j.lastSeenByContainer),i),className:E()(N.lastSeenByContainer,null==a?void 0:a.lastSeenByContainer),onMouseEnter:d,onMouseLeave:h},r.lastSeenByAuthors.map(function(e,t){return G.createElement(r.CustomLastSeenAvatar,{key:t,author:e,styles:s,index:t,mouseOver:L,classes:n})})))}var a={container:{position:"absolute",left:-50,top:0,width:40,height:40,lineHeight:"40px",fontWeight:400,borderTopLeftRadius:20,borderBottomLeftRadius:20,borderBottomRightRadius:20,textAlign:"center",borderTopRightRadius:5},text:{pointerEvents:"none"}},o={container:"react-bell-chat__avatar",text:"react-bell-chat__avatar__text"},r=G.memo,l=function(){return(l=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};var s=r(function(e){var t=e.author,r=e.classes,s=e.styles,n=l(l(l({},a.container),null==s?void 0:s.container),null!=t&&t.bgImageUrl?{backgroundImage:"url("+(null==t?void 0:t.bgImageUrl)+")",backgroundSize:"cover"}:{});return t&&G.createElement("div",{style:n,title:t.name,className:E()(o.container,null==r?void 0:r.container)},G.createElement("span",{style:l(l(l({},a.text),null==s?void 0:s.text),null===(e=e.styles)||void 0===e?void 0:e.text),className:E()(o.text,null==r?void 0:r.text)},t.bgImageUrl?null:t.avatarName||t.name.split(" ").map(function(e){return e[0]}).join("").toUpperCase().substr(0,3)))}),n={container:"react-bell-chat__is-typing__container"},i={container:{position:"absolute",bottom:2,left:0,right:0,color:"rgb(204, 204, 204)",textAlign:"center"}},u=function(){return(u=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};var c,p,h=r(function(e){var t=e.styles,r=e.classes,s=G.useMemo(function(){return u(u({},i.container),null==t?void 0:t.container)},[null==t?void 0:t.container]);return e.typingAuthors&&0<e.typingAuthors.length&&G.createElement("div",{className:E()(n.container,null==r?void 0:r.container),style:s},e.typingAuthors.map(function(e){return e.name}).join(", ").replace(/,(?!.*,)/gim," and")+(1===e.typingAuthors.length?" is ":" are ")+"typing")}),d={container:{overflow:"auto",padding:"0 10px",display:"flex",flexDirection:"column",height:"100%"}},b={container:"react-bell-chat__chat-scroll-area"},e=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),g=function(){return(g=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},f=(p=G.PureComponent,e(m,p),m.prototype.render=function(){var e=this.props,t=e.styles,e=e.classes;return G.createElement("div",{ref:this.containerRef,className:E()(b.container,null==e?void 0:e.container),style:g(g(g(g({},d.container),void 0!==this.props.maxHeight?{maxHeight:this.props.maxHeight}:{}),void 0!==this.props.minHeight?{minHeight:this.props.minHeight}:{}),null==t?void 0:t.container),onScroll:this.onScroll},this.props.children)},m.prototype.onScroll=function(){this.scrollContainer&&this.scrollContainer.scrollTop<=this.props.loadOldMessagesThreshold&&this.props.onLoadOldMessages()},m.prototype.containerRef=function(t){var e=this;this.scrollContainer=t,this.props.apiRef&&this.props.apiRef({scrollToBottom:function(e){return void 0===e&&(e="auto"),t&&(t.scrollTo?t.scrollTo({top:t.scrollHeight,behavior:e}):t.scrollTop=t.scrollHeight)},scrollTo:function(e){return t&&(t.scrollTo?t.scrollTo({top:e}):t.scrollTop=e)},scrolledToBottom:function(){return e.scrollContainer.scrollHeight-e.scrollContainer.scrollTop-e.scrollContainer.clientHeight<10},scrolledToLoadThreshold:function(){return e.scrollContainer&&e.scrollContainer.scrollTop<=e.props.loadOldMessagesThreshold},scrollTop:function(){return e.scrollContainer&&e.scrollContainer.scrollTop},scrollHeight:function(){return e.scrollContainer&&e.scrollContainer.scrollHeight},clientHeight:function(){return e.scrollContainer&&e.scrollContainer.clientHeight}})},m);function m(e){e=p.call(this,e)||this;return e.containerRef=e.containerRef.bind(e),e.onScroll=e.onScroll.bind(e),e}var v={container:"react-bell-chat__last-seen-avatar",text:"react-bell-chat__last-seen-avatar__text"},y={container:{width:24,height:24,lineHeight:"24px",fontWeight:400,fontSize:10,borderTopLeftRadius:12,borderTopRightRadius:12,borderBottomLeftRadius:12,borderBottomRightRadius:12,textAlign:"center",transition:"0.3s all ease-in-out",display:"block",position:"relative"},text:{pointerEvents:"none"}},C=function(){return(C=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};var S=r(function(e){var t=e.styles,r=e.classes,s=e.index,n=e.mouseOver,a=e.author,o=G.useMemo(function(){return C(C(C(C({},y.container),null==t?void 0:t.container),null!=a&&a.bgImageUrl?{backgroundImage:"url("+(null==a?void 0:a.bgImageUrl)+")",backgroundSize:"cover"}:{}),0<s&&!n?{marginTop:-12}:{marginTop:-4})},[null==t?void 0:t.container,s,n,null==a?void 0:a.bgImageUrl]),e=G.useMemo(function(){return C(C({},y.text),null==t?void 0:t.text)},[null==t?void 0:t.text]);return a&&G.createElement("div",{style:o,className:E()(v.container,null==r?void 0:r.container)},G.createElement("span",{style:e,className:E()(v.text,null==r?void 0:r.text)},a.bgImageUrl?null:a.lastSeenAvatarName||a.name[0].toUpperCase()))}),B={chatBubbleWrapper:"react-bell-chat__bubble-group"},w={bubbleGroupWrapper:{marginTop:10,marginBottom:10,position:"relative"}},_=function(){return(_=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};var O=r(function(s){var n=s.messages,a=s.author,e=s.CustomAvatar,t=s.styles,o=s.bubblesCentered,l=s.chatBubbleStyles,i=s.lastSeenAvatarStyles,r=s.avatarStyles,u=s.classes,c=s.chatBubbleClasses,p=s.lastSeenAvatarClasses,h=s.avatarClasses,d=s.showRecipientAvatar,b=s.CustomChatBubble,g=s.CustomSystemChatBubble,f=s.showRecipientLastSeenMessage,m=s.CustomLastSeenAvatar,v=s.CustomMessageRender,y=n.map(function(t,e){var r={yourAuthorId:s.yourAuthorId,author:a,message:t,bubblesCentered:o,styles:l,lastSeenAvatarStyles:i,classes:c,lastSeenAvatarClasses:p,isFirstInGroup:0===e,isLastInGroup:e===n.length-1&&1<n.length,isCenterInGroup:e<n.length-1&&1<n.length,lastSeenByAuthors:s.authors&&s.authors.filter(function(e){return void 0!==e.lastSeenMessageId&&e.lastSeenMessageId===t.id}),showRecipientLastSeenMessage:f,CustomLastSeenAvatar:m,CustomMessageRender:v};return void 0!==t.authorId?G.createElement(b,_({key:e},r)):G.createElement(g,_({key:e},r))}),C=a&&s.yourAuthorId===a.id;return G.createElement("div",{style:_(_({},w.bubbleGroupWrapper),null==t?void 0:t.bubbleGroupWrapper),className:E()(B.chatBubbleWrapper,null==u?void 0:u.chatBubbleWrapper)},!C&&d&&a&&e&&G.createElement(e,{author:a,styles:r,classes:h}),y)}),A={root:"react-bell-chat__chat-messages",showRecipientAvatar:"react-bell-chat__chat-messages--showRecipientAvatar",showRecipientLastSeenMessage:"react-bell-chat__chat-messages--showRecipientLastSeenMessage",showIsTyping:"react-bell-chat__chat-messages--showIsTyping"},x={root:{paddingBottom:10,paddingTop:10,flex:1,display:"flex",flexDirection:"column",justifyContent:"flex-end"},showRecipientAvatar:{paddingLeft:50},showIsTyping:{paddingBottom:24,position:"relative"},showRecipientLastSeenMessage:{paddingRight:30}},T=function(){return(T=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},R=function(e){var t=e.children,r=e.classes,s=e.styles,n=e.showIsTyping,a=e.showRecipientAvatar,o=e.showRecipientLastSeenMessage,l=G.useMemo(function(){return T(T(T(T(T(T(T(T({},null==x?void 0:x.root),null==s?void 0:s.root),a&&(null==x?void 0:x.showRecipientAvatar)),a&&(null==s?void 0:s.showRecipientAvatar)),n&&(null==x?void 0:x.showIsTyping)),n&&(null==s?void 0:s.showIsTyping)),o&&(null==x?void 0:x.showRecipientLastSeenMessage)),o&&(null==s?void 0:s.showRecipientLastSeenMessage))},[n,a,o,null==s?void 0:s.root,null==s?void 0:s.showRecipientAvatar,null==s?void 0:s.showIsTyping,null==s?void 0:s.showRecipientLastSeenMessage]),e=E()(A.root,null==r?void 0:r.root,((e={})[null==A?void 0:A.showRecipientAvatar]=a,e[null==r?void 0:r.showRecipientAvatar]=a,e[null==A?void 0:A.showIsTyping]=n,e[null==r?void 0:r.showIsTyping]=n,e[null==A?void 0:A.showRecipientLastSeenMessage]=o,e[null==r?void 0:r.showRecipientLastSeenMessage]=o,e));return G.createElement("div",{style:l,className:e},t)},M={container:"react-bell-chat__date-row"},L={container:{textAlign:"center",fontSize:12,color:"rgba(0, 0, 0, 0.55)"}},I=function(){return(I=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},H=G.memo(function(e){var t=e.styles,r=e.classes,s=G.useMemo(function(){return I(I({},L.container),null==t?void 0:t.container)},[null==t?void 0:t.container]);return e.date&&G.createElement("div",{className:E()(M.container,null==r?void 0:r.container),style:s,title:e.date.toLocaleDateString([],{weekday:"long",year:"numeric",month:"long",day:"numeric"})},e.date.toLocaleDateString())}),W={container:{display:"flex",marginBottom:10},spinnerColor:"currentColor"},F={container:"react-bell-chat__loading-messages"},D=function(){return(D=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},U=G.memo(function(t){var r=t.styles,e=t.classes,s=G.useMemo(function(){return D(D({},W.container),null==r?void 0:r.container)},[null==r?void 0:r.container]),n=G.useMemo(function(){var e;return{background:"none",margin:"auto",fill:null!==(e=null==r?void 0:r.spinnerColor)&&void 0!==e?e:W.spinnerColor,opacity:t.isVisible?1:0,transition:"0.3s all ease-in-out"}},[null==r?void 0:r.spinnerColor,t.isVisible]);return G.createElement("div",{className:E()(F.container,t.className,null==e?void 0:e.container),style:s},G.createElement("svg",{width:"40px",height:"40px",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",style:n},G.createElement("path",{stroke:"none",d:"M10 50A40 40 0 0 0 90 50A40 46 0 0 1 10 50",transform:"rotate(42 50 53)"},t.isVisible?G.createElement("animateTransform",{attributeName:"transform",type:"rotate",calcMode:"linear",values:"0 50 53;360 50 53",keyTimes:"0;1",dur:"1s",begin:"0s",repeatCount:"indefinite"}):null)))}),z={chatBubbleWrapper:E()(N.chatBubbleWrapper,"react-bell-chat__chat-bubble--system"),createdOn:"react-bell-chat__chat-bubble--system__created-on"},V={systemChatBubbleContainer:{textAlign:"center",fontSize:12,color:"rgba(0, 0, 0, 0.55)"}},Y=function(){return(Y=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};var q,J=G.memo(function(e){var t=e.styles,r=e.classes,s=e.message,n=e.config,a=Y(Y({},P),n).formatTime(s.createdOn),o=G.useMemo(function(){return Y(Y({},V.systemChatBubbleContainer),null==t?void 0:t.systemChatBubbleContainer)},[null==t?void 0:t.systemChatBubbleContainer]),n=G.useMemo(function(){return Y(Y({},V.systemChatBubbleText),null==t?void 0:t.systemChatBubbleText)},[null==t?void 0:t.systemChatBubbleText]);return s&&G.createElement("div",{className:E()(z.chatBubbleWrapper,null==r?void 0:r.chatBubbleWrapper),style:o},a&&G.createElement("span",{className:E()(z.createdOn,null==r?void 0:r.createdOn),title:e.message.createdOn.toLocaleString(),style:n},a,":"," "),e.message.message)}),K={chatPanel:{display:"flex",flexDirection:"column",flexGrow:1,overflow:"hidden",position:"relative"}},Q={chatPanel:"react-bell-chat__chat-panel"},r=(q=function(e,t){return(q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}q(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),X=function(){return(X=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},Z=function(e,o,l,i){return new(l=l||Promise)(function(r,t){function s(e){try{a(i.next(e))}catch(e){t(e)}}function n(e){try{a(i.throw(e))}catch(e){t(e)}}function a(e){var t;e.done?r(e.value):((t=e.value)instanceof l?t:new l(function(e){e(t)})).then(s,n)}a((i=i.apply(e,o||[])).next())})},$=function(r,s){var n,a,o,l={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,a&&(o=2&t[0]?a.return:t[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,t[1])).done)return o;switch(a=0,(t=o?[2&t[0],o.value]:t)[0]){case 0:case 1:o=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,a=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!(o=0<(o=l.trys).length&&o[o.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!o||t[1]>o[0]&&t[1]<o[3])){l.label=t[1];break}if(6===t[0]&&l.label<o[1]){l.label=o[1],o=t;break}if(o&&l.label<o[2]){l.label=o[2],l.ops.push(t);break}o[2]&&l.ops.pop(),l.trys.pop();continue}t=s.call(r,l)}catch(e){t=[6,e],a=0}finally{n=o=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};function ee(e){return e.message&&G.createElement("span",{className:e.className,style:e.style},e.message.message)}var te,re=(te=G.PureComponent,r(se,te),se.prototype.onMessageSend=function(){this.scrollApi&&this.scrollApi.scrollToBottom()},se.prototype.componentDidMount=function(){this.scrollApi&&this.scrollApi.scrollToBottom()},se.prototype.getSnapshotBeforeUpdate=function(e,t){return{wasScrolledToBottom:this.scrollApi&&this.scrollApi.scrolledToBottom(),scrollHeight:this.scrollApi&&this.scrollApi.scrollHeight(),clientHeight:this.scrollApi&&this.scrollApi.clientHeight()}},se.prototype.componentDidUpdate=function(s,e,t){var r,n;(this.props.messages.length!==s.messages.length||null!==(n=null===(r=this.props.authors)||void 0===r?void 0:r.some)&&void 0!==n&&n.call(r,function(t){var e,r;return t.isTyping!==(null===(r=null===(e=null===(r=s.authors)||void 0===r?void 0:r.find)||void 0===e?void 0:e.call(r,function(e){return t.id===e.id}))||void 0===r?void 0:r.isTyping)}))&&t&&t.wasScrolledToBottom?this.scrollApi.scrollToBottom():this.props.messages.length!==s.messages.length&&t&&e.isLoadingMessages&&(e=this.scrollApi&&this.scrollApi.scrollHeight(),this.scrollApi.scrollTo(e-t.scrollHeight))},se.prototype.renderMessages=function(e){var a=this,t=(this.props.styles,this.props),o=t.chatBubbleStyles,l=t.chatBubbleClasses,r=t.dateRowStyles,i=t.dateRowClasses,u=t.avatarStyles,c=t.avatarClasses,p=t.lastSeenAvatarStyles,h=t.lastSeenAvatarClasses,d=t.bubbleGroupStyles,b=t.bubbleGroupClasses,g=t.CustomChatBubble,f=t.showRecipientAvatar,m=t.CustomBubbleGroup,v=function(e,s){if("function"!=typeof s)throw new Error("groupBy take a function as only parameter");return e.reduce(function(e,t){var r=s(t);return e[r]||(e[r]=[]),e[r].push(t),e},{})}(e,function(e){return e.createdOn&&e.createdOn.toDateString()}),y=[],C=0;return Object.keys(v).forEach(function(e){var s=[],n=v[e];n[0]&&n[0].createdOn&&a.props.showDateRow&&y.push(G.createElement(a.props.CustomDateRow,{key:e,date:n[0].createdOn,styles:r,classes:i})),y=y.concat(n.map(function(t,e){if(s.push(t),n[e+1]&&n[e+1].authorId===t.authorId)return null;var r=s,e=a.props.authors&&a.props.authors.filter(function(e){return e.id===t.authorId})[0];return s=[],C++,G.createElement(m,{key:C,yourAuthorId:a.props.yourAuthorId,messages:r,author:e,authors:a.props.authors,showRecipientAvatar:f,CustomChatBubble:g,chatBubbleStyles:o,chatBubbleClasses:l,avatarStyles:u,avatarClasses:c,lastSeenAvatarStyles:p,lastSeenAvatarClasses:h,showRecipientLastSeenMessage:a.props.showRecipientLastSeenMessage,CustomAvatar:a.props.CustomAvatar,CustomLastSeenAvatar:a.props.CustomLastSeenAvatar,CustomMessageRender:a.props.CustomMessageRender,CustomSystemChatBubble:a.props.CustomSystemChatBubble,classes:b,styles:d})}))}),y},se.prototype.apiRef=function(e){this.scrollApi||e.scrollToBottom(),this.scrollApi=e},se.prototype.render=function(){var t=this,e=this.props,r=e.styles,s=e.classes,n=this.props,a=n.isTypingStyles,o=n.isTypingClasses,s=s||{},l=this.props,i=l.loadingMessagesStyle,u=l.chatFeedStyles,e=l.chatScrollAreaStyles,n=l.loadingMessagesClasses,r=l.chatScrollAreaClasses,l=this.props.authors&&this.props.authors.filter(function(e){return e.isTyping&&e.id!==t.props.yourAuthorId});return G.createElement("div",{className:E()(Q.chatPanel,this.props.className,null==s?void 0:s.chatPanel),style:X(X(X({},K.chatPanel),u&&u.chatPanel),this.props.style)},G.createElement(this.props.CustomScrollArea,{minHeight:this.props.minHeight,maxHeight:this.props.maxHeight,apiRef:this.apiRef,loadOldMessagesThreshold:this.props.loadOldMessagesThreshold,onLoadOldMessages:this.onLoadOldMessages,styles:e,classes:r},G.createElement(this.props.CustomChatMessagesContainer,{classes:this.props.chatMessagesContainerClasses,styles:this.props.chatMessagesContainerStyles,showIsTyping:this.props.showIsTyping,showRecipientAvatar:this.props.showRecipientAvatar,showRecipientLastSeenMessage:this.props.showRecipientLastSeenMessage},G.createElement(this.props.CustomLoadingMessages,{key:-1,isVisible:this.props.showLoadingMessages&&this.state.isLoadingMessages,styles:i,classes:n}),this.renderMessages(this.props.messages),this.props.showIsTyping&&G.createElement(this.props.CustomIsTyping,{key:-2,typingAuthors:l,styles:a,classes:o}))))},se.prototype.onLoadOldMessages=function(){return Z(this,void 0,void 0,function(){var t=this;return $(this,function(e){switch(e.label){case 0:return this.state.isLoadingMessages||!this.props.hasOldMessages?[3,5]:[4,new Promise(function(e){t.setState({isLoadingMessages:!0},function(){return e()})})];case 1:return e.sent(),this.props.onLoadOldMessages?[4,this.props.onLoadOldMessages()]:[3,3];case 2:e.sent(),e.label=3;case 3:return[4,new Promise(function(e){t.setState({isLoadingMessages:!1},function(){t.scrollApi.scrolledToLoadThreshold()&&t.scrollApi.scrollTo(t.props.loadOldMessagesThreshold+1),e()})})];case 4:e.sent(),e.label=5;case 5:return[2]}})})},se.defaultProps={messages:[],authors:[],CustomChatBubble:t,CustomBubbleGroup:O,CustomMessageRender:ee,CustomAvatar:s,CustomScrollArea:f,CustomIsTyping:h,CustomChatMessagesContainer:R,CustomLastSeenAvatar:S,CustomDateRow:H,CustomLoadingMessages:U,yourAuthorId:0,loadOldMessagesThreshold:50,CustomSystemChatBubble:J},se);function se(e){e=te.call(this,e)||this;return e.renderMessages=e.renderMessages.bind(e),e.onLoadOldMessages=e.onLoadOldMessages.bind(e),e.apiRef=e.apiRef.bind(e),e.state={isLoadingMessages:!1},e}})(),ae})()});
//# sourceMappingURL=index.js.map